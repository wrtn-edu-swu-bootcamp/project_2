# 추천 로직 기준

본 문서는 기술적 구현 방법이 아닌, **서비스 관점에서의 추천 원칙과 기준**을 정의합니다.

## 추천 원칙

### 1. 실현 가능성 최우선

**"추천받은 메뉴를 실제로 만들어 먹을 수 있어야 한다"**

- 사용자의 조리 능력 범위 내 메뉴만 추천
- 예산 범위 초과 메뉴 절대 제외
- 기피 식재료 포함 메뉴 완전 배제
- 일반 마트/편의점에서 구할 수 있는 재료만 사용

### 2. 영양 균형 고려

**"자취생에게 부족한 영양소를 자연스럽게 섭취"**

자취생의 일반적인 식습관 문제:
- 탄수화물 과다 (라면, 빵, 밥)
- 단백질 부족
- 채소 부족 (특히 녹황색 채소)
- 비타민, 미네랄 결핍

추천 시 우선순위:
1. 단백질 포함 메뉴
2. 채소 2가지 이상 포함 메뉴
3. 다양한 영양소 균형

### 3. 다양성 제공

**"매번 다른 메뉴를 경험하게 한다"**

- 동일한 질문에도 3가지 다른 스타일의 메뉴 제공
- 음식 유형 다양화: 밥 요리, 국물 요리, 면 요리
- 조리 방법 다양화: 볶음, 끓임, 무침 등

### 4. 점진적 난이도

**"요리 초보도 성공 경험을 쌓을 수 있게"**

- 쉬운 메뉴부터 시작하여 자신감 형성
- 단계별 레벨업 유도
- 실패 확률 낮은 메뉴 우선 추천

---

## 필수 필터링 기준

사용자 질문 답변에 따른 **하드 필터링** (절대 조건)

### 1. 조리 가능 여부에 따른 필터링

#### 조리 불가
- **추천 가능**: 
  - 편의점 재료 조합 (컵밥+계란, 샐러드+닭가슴살)
  - 조리 없이 먹을 수 있는 메뉴
  - 전자레인지만 사용
  
- **추천 불가**:
  - 칼질, 불 사용이 필요한 모든 메뉴

#### 10분 이내 간단 조리
- **추천 가능**:
  - 재료 3가지 이하
  - 조리 과정 2-3단계
  - 예: 계란볶음밥, 참치김치찌개, 토스트

- **추천 불가**:
  - 10분 초과 메뉴
  - 복잡한 손질이 필요한 재료

#### 20분 이내 기본 조리
- **추천 가능**:
  - 대부분의 일반 메뉴
  - 재료 5가지 이하
  - 조리 과정 5단계 이하

- **추천 불가**:
  - 전문적인 기술 필요 메뉴
  - 20분 초과 메뉴

#### 30분 이상 본격 조리
- **추천 가능**:
  - 모든 메뉴 (제한 없음)
  - 다양한 조리법 활용

### 2. 예산에 따른 필터링

#### 3,000원 이하
- 계란, 라면, 두부, 김치, 햄, 콩나물 등 저렴한 재료
- 1-2가지 주재료
- 예: 김치볶음밥, 계란국, 라면+계란

#### 3,000원 - 5,000원
- 위 재료 + 저렴한 채소 (양파, 당근, 대파)
- 참치캔, 소시지, 베이컨 등 가공 단백질
- 예: 참치김치찌개, 소시지야채볶음, 계란덮밥

#### 5,000원 - 8,000원
- 신선한 채소 (파프리카, 브로콜리, 시금치)
- 신선한 육류/생선 소량 (200g 이하)
- 예: 제육볶음, 닭가슴살샐러드, 돈까스

#### 8,000원 이상
- 품질 좋은 재료 자유롭게
- 다양한 부재료 활용
- 예: 스테이크, 연어구이, 해물파스타

### 3. 기피 식재료 필터링

- **완전 제외**: 해당 재료가 포함된 모든 메뉴
- **대체 재안**: 가능한 경우 비슷한 메뉴를 다른 재료로 제안
  - 예: 새우볶음밥 → 소시지볶음밥
  - 예: 돈까스 → 치킨까스

---

## 소프트 우선순위 기준

필수 조건 충족 후, **추가 질문 답변**에 따른 우선순위 조정

### 1. 식사 시간대 고려

**아침**
- 우선순위: 간단, 가벼움, 빠른 조리
- 예: 토스트, 계란요리, 샐러드, 죽

**점심**
- 우선순위: 든든함, 탄수화물
- 예: 덮밥, 볶음밥, 국밥, 파스타

**저녁**
- 우선순위: 영양 균형, 다양성
- 예: 모든 유형의 메뉴

**야식**
- 우선순위: 가벼움, 소화 용이
- 예: 계란찜, 샐러드, 우동, 죽

### 2. 집에 있는 재료 활용

- 해당 재료를 사용하는 메뉴 최우선 추천
- 추가 구매 재료 최소화
- 예: 김치 있음 → 김치찌개, 김치볶음밥 우선

### 3. 영양 목표 반영

**단백질 보충**
- 단백질 20g 이상 메뉴
- 고기, 생선, 계란, 두부 포함 메뉴

**채소 섭취**
- 채소 2-3가지 이상 포함
- 다양한 색깔의 채소

**가볍게 (다이어트)**
- 500kcal 이하
- 채소 위주, 담백한 조리법

**든든하게**
- 700kcal 이상
- 탄수화물 + 단백질 충분히

### 4. 요리 유형 선호

사용자가 선택한 유형 우선 추천:
- 국물 요리: 찌개, 국, 탕
- 밥 요리: 볶음밥, 덮밥, 비빔밥
- 면 요리: 파스타, 라면, 국수
- 간단한 안주: 전, 볶음, 구이

---

## 추천 결과 구성

### 추천 개수: 3개

**이유**: 
- 1개: 선택의 여지 없음, 강요하는 느낌
- 2개: 비교가 어려움
- 3개: 적절한 선택지, 비교하기 좋음
- 4개 이상: 선택 피로도 증가

### 3개 메뉴의 구성 원칙

**다양성 제공을 위한 조합**:

1. **균형잡힌 기본 메뉴** (추천 1)
   - 영양 균형 최우선
   - 중간 난이도
   - 가장 대중적인 메뉴
   - 예: 제육볶음+밥

2. **간편한 메뉴** (추천 2)
   - 조리 시간 최소화
   - 재료 개수 적음
   - 실패 확률 낮음
   - 예: 참치김치볶음밥

3. **특색 있는 메뉴** (추천 3)
   - 새로운 시도
   - 영양적으로 우수하거나 독특한 조합
   - 약간의 도전 요소
   - 예: 두부스테이크 샐러드

### 메뉴별 제공 정보

각 추천 메뉴마다 다음 정보 표시:

1. **메뉴명** (한눈에 알아볼 수 있는 이름)
2. **한 줄 소개** (메뉴의 특징, 왜 추천하는지)
3. **예상 조리시간**
4. **난이도** (하/중/상)
5. **주요 영양 정보** (칼로리, 단백질, 탄수화물)
6. **태그** (#든든한, #채소듬뿍, #단백질, #간편 등)

---

## 난이도 분류 기준

### 하 (★☆☆)
- 조리 시간: 10분 이내
- 조리 과정: 1-3단계
- 필요 기술: 끓이기, 볶기 기본
- 재료 개수: 1-3개
- 예: 계란볶음밥, 라면, 김치찌개

### 중 (★★☆)
- 조리 시간: 10-20분
- 조리 과정: 3-5단계
- 필요 기술: 칼질, 양념 배합
- 재료 개수: 4-6개
- 예: 제육볶음, 된장찌개, 야채볶음

### 상 (★★★)
- 조리 시간: 20분 이상
- 조리 과정: 5단계 이상
- 필요 기술: 타이밍 조절, 여러 조리법 동시 사용
- 재료 개수: 7개 이상
- 예: 돈까스, 떡볶이+튀김, 잡채

---

## 영양 균형 가이드

### 이상적인 한 끼 구성

**탄수화물** (50-60%)
- 밥, 면, 빵 등
- 에너지원

**단백질** (20-30%)
- 고기, 생선, 계란, 두부, 콩
- 근육 형성 및 회복
- 자취생이 가장 부족한 영양소

**지방** (20-30%)
- 식용유, 참기름, 고기의 지방
- 호르몬 생성, 에너지원

**채소** (200g 이상)
- 비타민, 미네랄, 식이섬유
- 자취생이 두 번째로 부족한 영양소

### 칼로리 가이드

- **아침**: 400-500kcal
- **점심**: 600-800kcal
- **저녁**: 600-800kcal
- **야식**: 300-400kcal

### 영양소별 권장량 (1끼 기준)

- **단백질**: 15-25g
- **식이섬유**: 5-10g
- **비타민 C**: 20-30mg
- **칼슘**: 200-300mg
- **철분**: 3-5mg

---

## 추천 알고리즘 우선순위 (요약)

### 1단계: 하드 필터링 (필수 조건)
```
전체 메뉴 DB
    ↓
[조리 가능 여부로 필터링]
    ↓
[예산으로 필터링]
    ↓
[기피 식재료로 필터링]
    ↓
추천 가능 메뉴 풀
```

### 2단계: 소프트 우선순위 (점수 부여)
```
추천 가능 메뉴 풀
    ↓
[식사 시간대 적합도: +10점]
    ↓
[집에 있는 재료 활용: +20점]
    ↓
[영양 목표 부합: +15점]
    ↓
[요리 유형 일치: +10점]
    ↓
[영양 균형도: +25점]
    ↓
[다양성 (최근 추천 이력과 중복 방지): +20점]
    ↓
점수순 정렬
```

### 3단계: 다양성 조합
```
점수 상위 메뉴들
    ↓
[유형이 다른 3개 선택]
- 1개: 균형잡힌 기본 메뉴
- 1개: 간편한 메뉴
- 1개: 특색 있는 메뉴
    ↓
최종 3개 추천
```

---

## 메뉴 DB 구성 원칙

실제 메뉴 데이터베이스에 포함되어야 할 정보:

### 각 메뉴당 필수 데이터

1. **기본 정보**
   - 메뉴명
   - 한 줄 소개
   - 카테고리 (한식, 중식, 양식, 일식 등)

2. **조리 정보**
   - 난이도 (하/중/상)
   - 예상 조리시간
   - 필요한 조리도구
   - 조리 과정 (단계별)

3. **재료 정보**
   - 주재료 리스트
   - 부재료 리스트
   - 양념/조미료 리스트
   - 재료별 예상 가격

4. **영양 정보**
   - 칼로리
   - 탄수화물
   - 단백질
   - 지방
   - 주요 비타민/미네랄

5. **필터링 태그**
   - 식사 시간대 (아침/점심/저녁/야식)
   - 요리 유형 (밥/국물/면/기타)
   - 영양 특성 (#고단백, #채소풍부, #저칼로리 등)
   - 난이도 태그 (#초보환영, #10분완성 등)

### MVP 메뉴 DB 규모

- **최소 메뉴 수**: 50개
  - 난이도 하: 20개
  - 난이도 중: 20개
  - 난이도 상: 10개

- **다양성 확보**
  - 밥 요리: 15개
  - 국물 요리: 15개
  - 면 요리: 10개
  - 기타 (샐러드, 전 등): 10개

---

## 추천 품질 검증 기준

좋은 추천인지 확인하는 체크리스트:

### 필수 충족 사항
- [ ] 사용자의 조리 능력 범위 내인가?
- [ ] 예산 범위 내인가?
- [ ] 기피 식재료가 포함되지 않았는가?

### 권장 충족 사항
- [ ] 단백질이 15g 이상 포함되어 있는가?
- [ ] 채소가 2가지 이상 포함되어 있는가?
- [ ] 3개 추천 메뉴가 서로 다른 유형인가?
- [ ] 일반 마트/편의점에서 구할 수 있는 재료인가?
- [ ] 초보자도 이해할 수 있는 조리법인가?

### 사용자 만족도 예상
- [ ] 실제로 만들어볼 의향이 생기는가?
- [ ] 영양적으로 도움이 되는가?
- [ ] 새로운 경험을 제공하는가?
